{
  "name": "jac-digital-platform",
  "version": "1.138.0",
  "description": "Firebase/GCP configuration and components for the JAC digital platform",
  "repository": "https://github.com/jac-uk/digital-platform",
  "license": "MIT",
  "readme": "README.md",
  "type": "module",
  "engines": {
    "node": "18"
  },
  "scripts": {
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "dev": "firebase emulators:start --import=./data/ --export-on-exit=./data --project=digital-platform-develop",
    "serve": "firebase emulators:start --import=./data/  --project=digital-platform-develop",
    "shell": "firebase functions:shell --project=digital-platform-develop",
    "emulators:kill": "lsof -t -i tcp:9099 | xargs kill && lsof -t -i tcp:5001 | xargs kill && lsof -t -i tcp:8080 | xargs kill && lsof -t -i tcp:9000 | xargs kill && lsof -t -i tcp:8085 | xargs kill && lsof -t -i tcp:9199 | xargs kill && lsof -t -i tcp:4500 | xargs kill && lsof -t -i tcp:9150 | xargs kill && lsof -t -i tcp:4000 | xargs kill",
    "emulators:firestore": "firebase emulators:start --only firestore  --project=digital-platform-develop",
    "start": "npm run shell",
    "logs": "firebase functions:log",
    "local:nodeScript": "export GOOGLE_APPLICATION_CREDENTIALS='service-account.json' && export FIRESTORE_EMULATOR_HOST='127.0.0.1:8080' && export FIREBASE_AUTH_EMULATOR_HOST=127.0.0.1:9099 && run(){ node -r dotenv/config nodeScripts/$1; }; run",
    "nodeScript": "export GOOGLE_APPLICATION_CREDENTIALS='service-account.json' && run(){ NODE_ENV=development node -r dotenv/config nodeScripts/$1; }; run",
    "staging:nodeScript": "export GOOGLE_APPLICATION_CREDENTIALS='service-account.staging.json' && run(){ DOTENV_CONFIG_PATH=.env.staging.local NODE_ENV=staging node -r dotenv/config nodeScripts/$1; }; run",
    "production:nodeScript": "export GOOGLE_APPLICATION_CREDENTIALS='service-account.production.json' && run(){ DOTENV_CONFIG_PATH=.env.production.local NODE_ENV=production node -r dotenv/config nodeScripts/$1; }; run",
    "nodeScriptOnWindows": "set GOOGLE_APPLICATION_CREDENTIALS=service-account.json&& node -r dotenv/config nodeScripts/%SCRIPT%",
    "indexes:export": "firebase firestore:indexes > database/firestore.indexes.json",
    "deploy:rules": "firebase deploy --project=digital-platform-develop --only firestore:rules",
    "deploy:indexes": "firebase deploy --project=digital-platform-develop --only firestore:indexes",
    "deploy:functions": "firebase deploy --project=digital-platform-develop --only functions --force",
    "deploy:function": "run(){ firebase deploy --project=digital-platform-develop --only functions:$1; }; run",
    "deploy:storage-rules": "firebase deploy --project=digital-platform-develop --only storage",
    "staging:deploy:rules": "firebase deploy --project=digital-platform-staging --only firestore:rules",
    "staging:deploy:indexes": "firebase deploy --project=digital-platform-staging --only firestore:indexes",
    "staging:deploy:functions": "firebase deploy --project=digital-platform-staging --only functions --force",
    "staging:deploy:function": "run(){ firebase deploy --project=digital-platform-staging --only functions:$1; }; run",
    "staging:deploy:storage-rules": "firebase deploy --project=digital-platform-staging --only storage",
    "production:deploy:rules": "firebase deploy --project=platform-production-9207d --only firestore:rules",
    "production:deploy:indexes": "firebase deploy --project=platform-production-9207d --only firestore:indexes --force",
    "production:deploy:functions": "firebase deploy --project=platform-production-9207d --only functions --force",
    "production:deploy:function": "run(){ firebase deploy --project=platform-production-9207d --only functions:$1; }; run",
    "production:deploy:storage-rules": "firebase deploy --project=platform-production-9207d --only storage",
    "test:rules": "export FIRESTORE_EMULATOR_HOST='127.0.0.1:8080' && mocha './test/rules/**/*.spec.js' --timeout=10000 --exit",
    "test:rule": "export FIRESTORE_EMULATOR_HOST='127.0.0.1:8080' && mocha './test/rules/**/1.database.spec.js' --timeout=10000 --exit",
    "test:functions": "mocha './test/functions/**/*.spec.js' --timeout=10000 --require dotenv/config",
    "test:actions": "NODE_OPTIONS=--experimental-vm-modules jest test/actions",
    "test:shared": "NODE_OPTIONS=--experimental-vm-modules jest test/shared",
    "watch:test:rules": "export FIRESTORE_EMULATOR_HOST='localhost:8080' && mocha './test/rules/**/*.spec.js' --timeout=10000 --reporter=min --watch --watch-extensions=rules",
    "ci:test:rules": "firebase emulators:exec --only firestore 'npm run test:rules'",
    "service-offline:rules": "cp -f ./service-offline/firestore.rules ./database/firestore.rules; npm run deploy:rules",
    "service-offline:storage-rules": "cp -f ./service-offline/storage.rules ./storage/storage.rules; npm run deploy:storage-rules",
    "service-offline": "npm run service-offline:rules; npm run service-offline:storage-rules",
    "service-online": "npm run deploy:rules; npm run deploy:storage-rules",
    "staging:service-offline:rules": "cp -f ./service-offline/firestore.rules ./database/firestore.rules; npm run staging:deploy:rules",
    "staging:service-offline:storage-rules": "cp -f ./service-offline/storage.rules ./storage/storage.rules; npm run staging:deploy:storage-rules",
    "staging:service-offline": "npm run staging:service-offline:rules; npm run staging:service-offline:storage-rules",
    "staging:service-online": "npm run staging:deploy:rules; npm run staging:deploy:storage-rules",
    "production:service-offline:rules": "cp -f ./service-offline/firestore.rules ./database/firestore.rules; npm run production:deploy:rules",
    "production:service-offline:storage-rules": "cp -f ./service-offline/storage.rules ./storage/storage.rules; npm run production:deploy:storage-rules",
    "production:service-offline": "npm run production:service-offline:rules; npm run production:service-offline:storage-rules",
    "production:service-online": "npm run production:deploy:rules; npm run production:deploy:storage-rules"
  },
  "dependencies": {
    "@google-cloud/storage": "^7.14.0",
    "axios": "^1.7.9",
    "bottleneck": "^2.19.5",
    "caseless": "^0.12.0",
    "chalk": "^5.4.0",
    "crypto": "^1.0.1",
    "esmock": "^2.6.9",
    "exceljs": "^4.4.0",
    "firebase": "^11.1.0",
    "firebase-admin": "^13.0.1",
    "firebase-functions": "^6.1.2",
    "firebase-functions-test": "^3.4.0",
    "firebase-tools": "^13.29.1",
    "fs": "^0.0.1-security",
    "googleapis": "^144.0.0",
    "lodash": "^4.17.21",
    "mammoth": "^1.8.0",
    "notifications-node-client": "^8.2.1",
    "path": "^0.12.7",
    "performance-now": "^2.1.0"
  },
  "devDependencies": {
    "@faker-js/faker": "^9.3.0",
    "@firebase/rules-unit-testing": "^4.0.1",
    "@jest/globals": "^29.7.0",
    "csv-writer": "^1.6.0",
    "dotenv": "^16.4.7",
    "eslint": "^9.17.0",
    "eslint-plugin-import": "^2.31.0",
    "eslint-plugin-promise": "^7.2.1",
    "jest": "^29.7.0",
    "jest-environment-jsdom": "^29.7.0",
    "mocha": "^11.0.1"
  },
  "private": true
}
