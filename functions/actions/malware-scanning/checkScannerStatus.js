

const request = require('request-promise');

module.exports = (config, firebase) => {

  const SCAN_SERVICE_URL = config.SCAN_SERVICE_URL;

  return {
    checkScannerStatus,
  };

  /**
   * Scan the specified file for viruses
   */
  async function checkScannerStatus() {
  try {
    // Make HTTP request to the virus scanner server
    const options = {
      method: 'POST',
      uri: SCAN_SERVICE_URL,
      resolveWithFullResponse: true,
    };
  
    const response = await request(options);

    // Check the response status code to determine scanner status
    } catch (error) {
        if (error.statusCode === 500) {
          // console.error('Error occurred while checking scanner status:', error);
          return 'online';
        } else {
          // console.error('Error occurred while checking scanner status:', error);
          return 'offline';
        }
    }
  }
};
